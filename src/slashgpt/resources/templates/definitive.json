{"openapi":"3.0.2","info":{"title":"Definitive Facts","description":"plugin for generating and executing sql queries","version":"v1"},"paths":{"/plugin/private/generate-sql":{"post":{"summary":"Generate Sql","description":"Given a natural language question,\ngenerate either natural language text response or a SQL query to answer the question.\ndo not put anything in dataset field unless explicitly specified by the user\nReturns a task_id to use in get_generated_sql to retrieve the result.","operationId":"generate_sql_plugin_private_generate_sql_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateSQLRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/plugin/private/execute-sql":{"post":{"summary":"Execute Sql","description":"Given SQL, execute it and returns execution_id, a reference to the result.","operationId":"execute_sql_plugin_private_execute_sql_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteSQLRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/plugin/public/poll-generate-sql-result/{task_id}":{"get":{"summary":"Poll Generate Sql Result","description":"chatgpt should poll this repeatedly until the result is ready without notifying the user.\nif the result is not ready, returns {\"ready\": false}.\nif the result is ready, returns the result of the generate-sql endpoint.","operationId":"poll_generate_sql_result_plugin_public_poll_generate_sql_result__task_id__get","parameters":[{"required":true,"schema":{"title":"Task Id","type":"string"},"name":"task_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/plugin/public/poll-execute-sql-result/{execution_id}/{format}":{"get":{"summary":"Poll Execute Sql Result","description":"chatgpt should poll this repeatedly until the result is ready without notifying the user.\nif the result is not ready, returns {\"ready\": false}.\nif the result is ready, returns the result of the generate-sql endpoint.\nuse the 'urls' format to get a list of urls to the other formats.","operationId":"poll_execute_sql_result_plugin_public_poll_execute_sql_result__execution_id___format__get","parameters":[{"required":true,"schema":{"title":"Execution Id","type":"string"},"name":"execution_id","in":"path"},{"required":true,"schema":{"title":"Format","enum":["urls","md","json"],"type":"string"},"name":"format","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}}},"components":{"schemas":{"ExecuteSQLRequest":{"title":"ExecuteSQLRequest","required":["sql","dataset"],"type":"object","properties":{"sql":{"title":"Sql","type":"string"},"dataset":{"title":"Dataset","type":"string"}}},"GenerateSQLRequest":{"title":"GenerateSQLRequest","required":["question"],"type":"object","properties":{"question":{"title":"Question","type":"string"}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"anyOf":[{"type":"string"},{"type":"integer"}]}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}